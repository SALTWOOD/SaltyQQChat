<div align="center">

![SaltyQQChat](https://socialify.git.ci/SALTWOOD/SaltyQQChat/image?description=1&font=Inter&forks=1&issues=1&language=1&name=1&owner=1&pattern=Plus&pulls=1&stargazers=1&theme=Auto)

# SaltyQQChat
âœ¨ğŸ‰ **åŸºäº QQAPI çš„ã€å¯æ‹“å±•çš„ QQ æœºå™¨äººæ’ä»¶ï¼** ğŸ‰âœ¨
</div>

# ç®€ä»‹
è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ [QQAPI](https://github.com/AnzhiZhang/MCDReforgedPlugins/tree/master/src/qq_api) çš„ QQ æœºå™¨äººæ’ä»¶ï¼Œç›¸å½“äºæ˜¯å¦ä¸€ä¸ª [QQChat](https://github.com/AnzhiZhang/MCDReforgedPlugins/tree/master/src/qq_chat)ï¼Œç æ‰äº†å¾ˆå¤šä¸ªäººè®¤ä¸ºæ²¡å¿…è¦çš„åŠŸèƒ½ï¼Œä¼˜åŒ–äº†ä»£ç ç»“æ„ã€‚

åŒæ—¶ï¼Œå®ƒè¿˜æ”¯æŒé€šè¿‡ **API è°ƒç”¨**çš„æ–¹å¼ï¼Œç®€å•åœ°æ‰©å±•æœºå™¨äººï¼Œæ·»åŠ å±äºä½ çš„å‘½ä»¤ï¼

ç›®å‰ç›¸æ¯” QQChat æ–°å¢åŠŸèƒ½ï¼š
- [x] æ”¯æŒé€šè¿‡ `/bot-ban` `/bot-pardon` æ‹’ç»å“åº”æŸç”¨æˆ·
- [x] æ”¯æŒé€šè¿‡æœºå™¨äººæ‰§è¡Œæ›´å¤šåŸç‰ˆå‘½ä»¤è€Œä¸ä½¿ç”¨ `/command`ï¼ˆå¦‚ `/ban` `/pardon`ï¼‰
- [x] æ”¯æŒé€šè¿‡æœºå™¨äººå¯åœæœåŠ¡å™¨
- [x] æ”¯æŒè‰¾ç‰¹æœºå™¨äººè¿›è¡Œç­”å¤ï¼Œè€Œä¸æ˜¯å‘ä¸€å¥ä»€ä¹ˆå‘½ä»¤å°±ç­”å¤
- [x] æ”¯æŒ MC å†…æ‰§è¡Œ QQ æœºå™¨äººå‘½ä»¤
- [x] é€šè¿‡ `/ping` å‘½ä»¤ã€`/info` å‘½ä»¤æ£€æŸ¥æœºå™¨äººçŠ¶æ€
- [x] **[å¼€å‘ç‰¹æ€§]** é€šè¿‡ `/reload` è¿œç¨‹é‡è½½æ’ä»¶
- [x] å¯è‡ªå®šä¹‰çš„å•å‘/åŒå‘ MC <==> QQ ç¾¤è½¬å‘
- [x] åŸºäºæ­£åˆ™è¡¨è¾¾å¼çš„æ˜“æ‰©å±•å‘½ä»¤æ ‘

åŒæ—¶ï¼Œè¿˜å»é™¤/ä¿®æ”¹äº†ä»¥ä¸‹åŠŸèƒ½ï¼š
- [x] æ²¡æœ‰â€œç®¡ç†ç¾¤â€ã€â€œä¸»ç¾¤â€ã€â€œæ¶ˆæ¯åŒæ­¥ç¾¤â€çš„åŠŸèƒ½ï¼Œæ”¹ä¸ºå¤šç¾¤åŒæ­¥ï¼ˆä¸è¿‡ä¸€èˆ¬å°±ä¸€ä¸ªç¾¤è€Œå·²ï¼‰
- [x] æ²¡æœ‰â€œMultiServerâ€ç‰¹æ€§ï¼Œå› ä¸ºä¼šå¯¼è‡´éš¾ä»¥é¢„æ–™çš„ bug ä¸”åº”ç”¨é¢å°
- [x] å¯¹ `!!qq` å‘½ä»¤åšäº†æƒé™é™åˆ¶ï¼Œå› ä¸ºæ²¡æœ‰å¯¹ CQ ç è¿›è¡Œè½¬ä¹‰ï¼Œå¯èƒ½ä¼šå¯¼è‡´æœºå™¨äººè´¦å·è¢«ç”¨äºå‘å¸ƒè¿è§„ä¿¡æ¯
- [x] ä¸­æ–‡å’Œæ•°å­—ã€è‹±æ–‡ä¹‹é—´åšäº†é—´éš”ï¼Œä¸”è¯­æ°”æ›´åŠ è¯™è°

# ä½¿ç”¨
## é€šè¿‡ MCDR å®‰è£…
åœ¨ MCDR æ§åˆ¶å°ä½¿ç”¨ `!!MCDR plugin install salty_qq_chat`ï¼Œç„¶å `!!MCDR confirm`ã€‚

## é€šè¿‡ Release å®‰è£…
åœ¨ [Releases é¡µé¢](https://github.com/SALTWOOD/SaltyQQChat/releases) ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„ `.mcdr` æ–‡ä»¶ï¼Œæ”¾å…¥ `plugins` æ–‡ä»¶å¤¹é‡è½½ã€‚

## é€šè¿‡æºä»£ç 
åœ¨ `plugins` ä¸‹æ‰§è¡Œ `git clone https://github.com/SALTWOOD/SaltyQQChat` æˆ–è€… `git clone git@github.com:SALTWOOD/SaltyQQChat`ï¼Œç„¶åé‡è½½æ’ä»¶ã€‚

# API
è¿™æ˜¯è¿™ä¸ªæ’ä»¶æœ€æœ‰æ„æ€çš„åŠŸèƒ½ä¹‹ä¸€ï¼Œå¯ä»¥é€šè¿‡æ·»åŠ å…¶ä»– MCDR æ’ä»¶çš„æ–¹å¼ä¸ºè¿™ä¸ªæ’ä»¶æ·»åŠ è‡ªå®šä¹‰å‘½ä»¤ã€‚
è¿™é‡Œå±•å‡ºä¸€ä¸ªå•æ–‡ä»¶æ’ä»¶çš„ä»£ç ä½œä¸ºç¤ºä¾‹ï¼š
```Python
from mcdreforged.api.types import PluginServerInterface
from typing import Callable, List
import re

reply: Callable
PLUGIN_METADATA = {
    'id': 'sqc_extension',
    'version': '1.0.0',
    'name': 'SQC extension plugin',
    'description': 'SaltyQQChat\'s extension plugin',
    'author': 'NONE',
    'link': 'https://github.com',
    'dependencies': {
        'salty_qq_chat': '>=1.0.0'
    }
}

def on_load(server: PluginServerInterface, old):
    global reply
    sqc = server.get_plugin_instance("salty_qq_chat")
    qqapi = server.get_plugin_instance("qq_api")

    reply = sqc.reply

    sqc.commands.add_command(re.compile(r'/ä½ çš„å‘½ä»¤ (.*)'), [str], handler)

def handler(server: PluginServerInterface, event, command: List[str],
            event_type):
    message = command[0]
    reply(
        event,
        f"[CQ:at,qq={event.user_id}] ä½ æä¾›çš„å‚æ•°æ˜¯ï¼š\"{message}\""
    )
```

# ç‰¹åˆ«é¸£è°¢
- [QQAPI](https://github.com/AnzhiZhang/MCDReforgedPlugins/tree/master/src/qq_api) - æä¾›æ­£å‘ WebSocket æ¥å…¥åˆ° CQHttp çš„æ¥å£
- [AnzhiZhang](https://github.com/AnzhiZhang) - ç‰¹ä¾‹ä¸ºæˆ‘æä¾› LGPL åè®®æˆæƒï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯ç”¨äº† GPLï¼ˆ
- **SALTWOâˆ…D æœåŠ¡å™¨çš„å„ä½** - å¸®æˆ‘æµ‹è¯•æœºå™¨äººï¼Œè¿˜èµ¶åœ¨å‘å¸ƒ Release ä¹‹å‰å¸®æˆ‘å‘ç°äº†è¶Šæƒæ¼æ´ï¼ˆ

# ç¢ç¢å¿µ
- å…¶å®è¿™ä¸ªé¡¹ç›®ä¹Ÿä¸æ˜¯ç…§æŠ„ QQChat çš„å•¦ï¼Œåªæ˜¯å› ä¸ºèƒ½æ‰¾åˆ°é€‚åˆæˆ‘çš„ç¯å¢ƒçš„ç°æˆçš„ API åªæœ‰ QQAPI ä¸€ä¸ªï¼Œåˆåªæœ‰ä¸€ä¸ª QQChat æ˜¯è¿™ä¸ª API çš„ä¸‹æ¸¸ä½¿ç”¨ï¼Œæ‰€ä»¥æœ‰äº›éƒ¨åˆ†æ¯”è¾ƒåƒæ˜¯æ— æ³•é¿å…çš„ï¼ˆï¼‰